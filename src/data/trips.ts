export interface TripCoordinate {
  lat: number;
  lng: number;
}

export const trips = {
  japanTrip2025: [
    { lat: 46.3497, lng: -87.3873 }, // K.I. Sawyer Airport (MQT)
    { lat: 41.9742, lng: -87.9073 }, // Chicago O'Hare Airport (ORD)
    { lat: 35.772, lng: 140.3929 }, // Narita International Airport (NRT)
    { lat: 42.7752, lng: 141.6923 }, // New Chitose Airport (CTS)
    { lat: 35.772, lng: 140.3929 }, // Narita International Airport (NRT)
    { lat: 41.9742, lng: -87.9073 }, // Chicago O'Hare Airport (ORD)
    { lat: 46.3497, lng: -87.3873 }, // K.I. Sawyer Airport (MQT)
  ],

  japanTrip2024: [
    { lat: 46.3497, lng: -87.3873 }, // K.I. Sawyer Airport (MQT)
    { lat: 41.9742, lng: -87.9073 }, // Chicago O'Hare Airport (ORD)
    { lat: 35.5494, lng: 139.7798 }, // Haneda Airport (HND)
    { lat: 41.9742, lng: -87.9073 }, // Chicago O'Hare Airport (ORD)
    { lat: 46.3497, lng: -87.3873 }, // K.I. Sawyer Airport (MQT)
  ],

  icelandTrip2024: [
    { lat: 46.3497, lng: -87.3873 }, // K.I. Sawyer Airport (MQT)
    { lat: 42.2162, lng: -83.3554 }, // Detroit Metropolitan Airport (DTW)
    { lat: 63.987, lng: -22.6192 }, // Keflavik international Airport (KEF)
    { lat: 42.2162, lng: -83.3554 }, // Detroit Metropolitan Airport (DTW)
    { lat: 46.3497, lng: -87.3873 }, // K.I. Sawyer Airport (MQT)
  ],

  arizonaTrip2023: [
    { lat: 46.3497, lng: -87.3873 }, // K.I. Sawyer Airport (MQT)
    { lat: 41.9742, lng: -87.9073 }, // Chicago O'Hare Airport (ORD)
    { lat: 32.1161, lng: -110.941 }, // Tucson International Airport (TUS)
    { lat: 41.9742, lng: -87.9073 }, // Chicago O'Hare Airport (ORD)
    { lat: 46.3497, lng: -87.3873 }, // K.I. Sawyer Airport (MQT)
  ],

  japanTrip2023: [
    { lat: 46.3497, lng: -87.3873 }, // K.I. Sawyer Airport (MQT)
    { lat: 41.9742, lng: -87.9073 }, // Chicago O'Hare Airport (ORD)
    { lat: 35.5494, lng: 139.7798 }, // Haneda Airport (HND)
    { lat: 41.9742, lng: -87.9073 }, // Chicago O'Hare Airport (ORD)
    { lat: 46.3497, lng: -87.3873 }, // K.I. Sawyer Airport (MQT)
  ],

  washingtonTrip2023: [
    { lat: 46.3497, lng: -87.3873 }, // K.I. Sawyer Airport (MQT)
    { lat: 41.9742, lng: -87.9073 }, // Chicago O'Hare Airport (ORD)
    { lat: 38.8512, lng: -77.0402 }, // Ronald Reagan Washington National Airport (DCA)
    { lat: 41.9742, lng: -87.9073 }, // Chicago O'Hare Airport (ORD)
    { lat: 46.3497, lng: -87.3873 }, // K.I. Sawyer Airport (MQT)
  ],

  japanTrip2022: [
    { lat: 46.3497, lng: -87.3873 }, // K.I. Sawyer Airport (MQT)
    { lat: 41.9742, lng: -87.9073 }, // Chicago O'Hare Airport (ORD)
    { lat: 35.772, lng: 140.3929 }, // Narita International Airport (NRT)
    { lat: 41.9742, lng: -87.9073 }, // Chicago O'Hare Airport (ORD)
    { lat: 46.3497, lng: -87.3873 }, // K.I. Sawyer Airport (MQT)
  ],

  japanTrip2019: [
    { lat: 46.3497, lng: -87.3873 }, // K.I. Sawyer Airport (MQT)
    { lat: 41.9742, lng: -87.9073 }, // Chicago O'Hare Airport (ORD)
    { lat: 35.772, lng: 140.3929 }, // Narita International Airport (NRT)
    { lat: 34.7863, lng: 135.4378 }, // Osaka International Airport (ITM)
    { lat: 35.772, lng: 140.3929 }, // Narita International Airport (NRT)
    { lat: 41.9742, lng: -87.9073 }, // Chicago O'Hare Airport (ORD)
    { lat: 46.3497, lng: -87.3873 }, // K.I. Sawyer Airport (MQT)
  ],

  romaniaTrip2019: [
    { lat: 46.3497, lng: -87.3873 }, // K.I. Sawyer Airport (MQT)
    { lat: 42.2162, lng: -83.3554 }, // Detroit Metropolitan Airport (DTW)
    { lat: 51.47, lng: -0.4543 }, // Heathrow Airport (LHR)
    { lat: 44.5713, lng: 26.0853 }, // Bucharest Henri Coandă International Airport (OTP)
    { lat: 49.0097, lng: 2.5479 }, // Paris Charles de Gaulle Airport (CDG)
    { lat: 42.2162, lng: -83.3554 }, // Detroit Metropolitan Airport (DTW)
    { lat: 44.8848, lng: -93.2223 }, // Minneapolis–Saint Paul International Airport
    { lat: 42.2162, lng: -83.3554 }, // Detroit Metropolitan Airport (DTW)
    { lat: 46.3497, lng: -87.3873 }, // K.I. Sawyer Airport (MQT)
  ],

  norwayTrip2018: [
    { lat: 46.3497, lng: -87.3873 }, // K.I. Sawyer Airport (MQT)
    { lat: 42.2162, lng: -83.3554 }, // Detroit Metropolitan Airport (DTW)
    { lat: 52.3105, lng: 4.7683 }, // Amsterdam Airport Schiphol
    { lat: 60.2918, lng: 5.222 }, // Bergen Airport, Flesland (BGO)
    { lat: 52.3105, lng: 4.7683 }, // Amsterdam Airport Schiphol
    { lat: 44.8848, lng: -93.2223 }, // Minneapolis–Saint Paul International Airport
    { lat: 46.3497, lng: -87.3873 }, // K.I. Sawyer Airport (MQT)
  ],

  icelandTrip2018: [
    { lat: 46.3497, lng: -87.3873 }, // K.I. Sawyer Airport (MQT)
    { lat: 42.2162, lng: -83.3554 }, // Detroit Metropolitan Airport (DTW)
    { lat: 40.6413, lng: -73.7781 }, // John F. Kennedy Airport (JFK)
    { lat: 63.987, lng: -22.6192 }, // Keflavik international Airport (KEF)
    { lat: 40.6413, lng: -73.7781 }, // John F. Kennedy Airport (JFK)
    { lat: 44.8848, lng: -93.2223 }, // Minneapolis–Saint Paul International Airport
    { lat: 46.3497, lng: -87.3873 }, // K.I. Sawyer Airport (MQT)
  ],

  japanTrip2017: [
    { lat: 46.3497, lng: -87.3873 }, // K.I. Sawyer Airport (MQT)
    { lat: 41.9742, lng: -87.9073 }, // Chicago O'Hare Airport (ORD)
    { lat: 35.772, lng: 140.3929 }, // Narita International Airport (NRT)
    { lat: 41.9742, lng: -87.9073 }, // Chicago O'Hare Airport (ORD)
    { lat: 46.3497, lng: -87.3873 }, // K.I. Sawyer Airport (MQT)
  ],

  texasTrip2017: [
    { lat: 46.3497, lng: -87.3873 }, // K.I. Sawyer Airport (MQT)
    { lat: 42.2162, lng: -83.3554 }, // Detroit Metropolitan Airport (DTW)
    { lat: 32.8998, lng: -97.0403 }, // Dallas Fort Worth (DFT)
    { lat: 42.2162, lng: -83.3554 }, // Detroit Metropolitan Airport (DTW)
    { lat: 46.3497, lng: -87.3873 }, // K.I. Sawyer Airport (MQT)
  ],

  newYorkTrip2017: [
    { lat: 46.3497, lng: -87.3873 }, // K.I. Sawyer Airport (MQT)
    { lat: 41.9742, lng: -87.9073 }, // Chicago O'Hare Airport (ORD)
    { lat: 40.6413, lng: -73.7781 }, // John F. Kennedy Airport (JFK)
    { lat: 41.9742, lng: -87.9073 }, // Chicago O'Hare Airport (ORD)
    { lat: 46.3497, lng: -87.3873 }, // K.I. Sawyer Airport (MQT)
  ],

  bostonTrip2016: [
    { lat: 42.9476, lng: -87.8966 }, // General Mitchell International Airport
    { lat: 42.3656, lng: -71.0096 }, // Logan International Airport (BOS)
    { lat: 42.9476, lng: -87.8966 }, // General Mitchell International Airport
  ],

  newYorkTrip2014: [
    { lat: 44.4834, lng: -88.1344 }, // Austin Straubel International Airport (GRB)
    { lat: 41.9742, lng: -87.9073 }, // Chicago O'Hare Airport (ORD)
    { lat: 40.7769, lng: -73.874 }, // LaGuardia Airport (LGA)
    { lat: 41.9742, lng: -87.9073 }, // Chicago O'Hare Airport (ORD)
    { lat: 44.4834, lng: -88.1344 }, // Austin Straubel International Airport (GRB)
  ],

  hersheyTrip2014: [
    { lat: 46.3497, lng: -87.3873 }, // K.I. Sawyer Airport (MQT)
    { lat: 42.2162, lng: -83.3554 }, // Detroit Metropolitan Airport (DTW)
    { lat: 40.1942, lng: -76.7577 }, // Harrisburg International Airport
    { lat: 42.2162, lng: -83.3554 }, // Detroit Metropolitan Airport (DTW)
    { lat: 46.3497, lng: -87.3873 }, // K.I. Sawyer Airport (MQT)
  ],

  newYorkTrip2012: [
    { lat: 44.4834, lng: -88.1344 }, // Austin Straubel International Airport (GRB)
    { lat: 41.9742, lng: -87.9073 }, // Chicago O'Hare Airport (ORD)
    { lat: 40.7769, lng: -73.874 }, // LaGuardia Airport (LGA)
    { lat: 41.9742, lng: -87.9073 }, // Chicago O'Hare Airport (ORD)
    { lat: 44.4834, lng: -88.1344 }, // Austin Straubel International Airport (GRB)
  ],

  texasTrip2003: [
    { lat: 46.3497, lng: -87.3873 }, // K.I. Sawyer Airport (MQT)
    { lat: 41.9742, lng: -87.9073 }, // Chicago O'Hare Airport (ORD)
    { lat: 32.8998, lng: -97.0403 }, // Dallas Fort Worth (DFT)
    { lat: 32.4119, lng: -99.68 }, // Abilene Regional Airport
    { lat: 32.8998, lng: -97.0403 }, // Dallas Fort Worth (DFT)
    { lat: 41.9742, lng: -87.9073 }, // Chicago O'Hare Airport (ORD)
    { lat: 45.7202, lng: -87.092 }, // Delta County Airport (ESC)
  ],
};

export interface TripStats {
  totalAirports: number;
  totalTrips: number;
  totalFlights: number;
  mostVisitedAirport: string;
  yearSpan: string;
}

export function calculateTripStats(): TripStats {
  const allTrips = Object.values(trips);
  const allCoordinates = allTrips.flat();

  // Count unique airports
  const uniqueAirports = new Set(
    allCoordinates.map((coord) => `${coord.lat},${coord.lng}`)
  );

  // Count total flights (each coordinate in a trip represents a flight segment)
  const totalFlights = allCoordinates.length;

  // Find most visited airport
  const airportCounts = new Map<string, number>();
  allCoordinates.forEach((coord) => {
    const key = `${coord.lat},${coord.lng}`;
    airportCounts.set(key, (airportCounts.get(key) || 0) + 1);
  });

  let mostVisited = "";
  let maxCount = 0;
  airportCounts.forEach((count, coords) => {
    if (count > maxCount) {
      maxCount = count;
      mostVisited = coords;
    }
  });

  // Extract years from trip names
  const years = Object.keys(trips)
    .map((key) => key.match(/\d{4}/)?.[0])
    .filter((year): year is string => year !== undefined)
    .map(Number)
    .sort((a, b) => a - b);

  const yearSpan =
    years.length > 0 ? `${years[0]}-${years[years.length - 1]}` : "";

  // Map most visited coordinate to airport code (MQT or ORD likely)
  const [lat, lng] = mostVisited.split(",").map(Number);
  let airportCode = "";

  // Common airports from your data
  const airportMap: { [key: string]: string } = {
    "46.3497,-87.3873": "MQT",
    "41.9742,-87.9073": "ORD",
    "42.2162,-83.3554": "DTW",
    "35.772,140.3929": "NRT",
  };

  airportCode = airportMap[mostVisited] || "Unknown";

  return {
    totalAirports: uniqueAirports.size,
    totalTrips: allTrips.length,
    totalFlights,
    mostVisitedAirport: airportCode,
    yearSpan,
  };
}
